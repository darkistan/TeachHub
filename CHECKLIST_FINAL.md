# ‚úÖ –§—ñ–Ω–∞–ª—å–Ω–∏–π —á–µ–∫-–ª–∏—Å—Ç - Schedule Bot v2.0

**–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:** 4 –≥—Ä—É–¥–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è:** 2.0 (SQLite + Flask)

---

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏

### 1. SQLAlchemy –≤–µ—Ä—Å—ñ—è
- ‚ùå –ë—É–ª–∞: 2.0.23 (–Ω–µ—Å—É–º—ñ—Å–Ω–∞ –∑ Python 3.13)
- ‚úÖ –°—Ç–∞–ª–∞: 2.0.44 (—Å—É–º—ñ—Å–Ω–∞)
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ venv

### 2. –Ü–º–ø–æ—Ä—Ç–∏ –º–æ–¥—É–ª—ñ–≤
- ‚ùå `from schedule_handler_db import` (–Ω–µ —ñ—Å–Ω—É—î)
- ‚úÖ `from schedule_handler import` (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ)
- ‚úÖ –í—Å—ñ –º–æ–¥—É–ª—ñ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 3. Circular imports
- ‚ùå logger.py –≤–∏–∫–ª–∏–∫–∞–≤ –ø–æ–º–∏–ª–∫—É –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `if get_db_manager() is None`

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–π–ª—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É

### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ (10 —à—Ç):
- ‚úÖ `bot.py` - —ñ–º–ø–æ—Ä—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ
- ‚úÖ `auth.py` - –ë–î –≤–µ—Ä—Å—ñ—è
- ‚úÖ `schedule_handler.py` - –ë–î –≤–µ—Ä—Å—ñ—è
- ‚úÖ `notification_manager.py` - –ë–î –≤–µ—Ä—Å—ñ—è, —ñ–º–ø–æ—Ä—Ç –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ `announcement_manager.py` - –ë–î –≤–µ—Ä—Å—ñ—è
- ‚úÖ `schedule_analyzer.py` - –ë–î –≤–µ—Ä—Å—ñ—è
- ‚úÖ `logger.py` - –ë–î+—Ñ–∞–π–ª, circular import –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ `database.py` - WAL mode, retry logic
- ‚úÖ `models.py` - 10 —Ç–∞–±–ª–∏—Ü—å
- ‚úÖ `air_alert.py` - –±–µ–∑ –∑–º—ñ–Ω

### .bat —Ñ–∞–π–ª–∏ (4 —à—Ç):
- ‚úÖ `setup.bat` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ `start_all.bat` - –∑–∞–ø—É—Å–∫ –≤—Å—å–æ–≥–æ
- ‚úÖ `start_bot.bat` - —Ç—ñ–ª—å–∫–∏ –±–æ—Ç
- ‚úÖ `start_web.bat` - —Ç—ñ–ª—å–∫–∏ –≤–µ–±

### –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
- ‚úÖ `run_web.py` - –∑–∞–ø—É—Å–∫ Flask
- ‚úÖ `web_admin/app.py` - 8 –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- ‚úÖ `web_admin/templates/` - 8 HTML —Ñ–∞–π–ª—ñ–≤
- ‚úÖ `web_admin/static/` - CSS + JS

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
- ‚úÖ `.gitignore` - –∑–∞—Ö–∏—Å—Ç —Å–µ–∫—Ä–µ—Ç—ñ–≤
- ‚úÖ `config.env.example` - —à–∞–±–ª–æ–Ω
- ‚úÖ `requirements.txt` - –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### –£—Ç–∏–ª—ñ—Ç–∏:
- ‚úÖ `check_db_status.py` - –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ë–î

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ JSON

### –ö–æ–º–∞–Ω–¥–∞:
```bash
grep -r "\.json['\"]" *.py --exclude-dir=venv
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ **0 –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å JSON** —É —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç—É  
‚ÑπÔ∏è –¢—ñ–ª—å–∫–∏ air_alert.py –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î JSON –¥–ª—è API (—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

### –í–∏–¥–∞–ª–µ–Ω—ñ JSON —Ñ–∞–π–ª–∏:
- ‚ùå allowed_users.json
- ‚ùå announcements.json  
- ‚ùå notification_history.json
- ‚ùå schedule_data.json
- ‚ùå schedule.json

---

## ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –§–∞–π–ª–∏:
- ‚úÖ `schedule_bot.db` - –æ—Å–Ω–æ–≤–Ω–∞ –ë–î
- ‚úÖ `schedule_bot.db-wal` - WAL –∂—É—Ä–Ω–∞–ª
- ‚úÖ `schedule_bot.db-shm` - shared memory

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
- ‚úÖ WAL mode —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π
- ‚úÖ Busy timeout 30000 –º—Å
- ‚úÖ Connection pool 10+20
- ‚úÖ Retry logic 3 —Å–ø—Ä–æ–±–∏

### –¢–∞–±–ª–∏—Ü—ñ (10 —à—Ç):
1. ‚úÖ users
2. ‚úÖ pending_requests
3. ‚úÖ schedule_entries
4. ‚úÖ schedule_metadata
5. ‚úÖ academic_periods
6. ‚úÖ announcements
7. ‚úÖ notification_history
8. ‚úÖ notification_settings
9. ‚úÖ logs
10. ‚úÖ bot_config

---

## ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø—É—Å–∫—É

### –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```bash
python run_web.py
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏–≤—Å—è –Ω–∞ http://127.0.0.1:5000
- ‚úÖ –ë–î —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü—ñ —Å—Ç–≤–æ—Ä–µ–Ω—ñ
- ‚ö†Ô∏è –ë—É–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ)

### Telegram –±–æ—Ç:
```bash
python bot.py
```
**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
- ‚úÖ –û–±—Ä–æ–±–Ω–∏–∫ —Ä–æ–∑–∫–ª–∞–¥—É —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–æ!

---

## ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (6 —Ñ–∞–π–ª—ñ–≤)

1. ‚úÖ `START_HERE.md` - –≥–æ–ª–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è ‚≠ê
2. ‚úÖ `README.md` - –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
3. ‚úÖ `QUICK_START.md` - 4 –∫—Ä–æ–∫–∏
4. ‚úÖ `USER_GUIDE.md` - –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
5. ‚úÖ `DB_CONCURRENCY_GUIDE.md` - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ñ—Å—Ç—å
6. ‚úÖ `INSTALLATION_COMPLETE.md` - –∑–≤—ñ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

---

## üéØ –§—ñ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å

### –í—Å—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω—ñ:
- ‚úÖ –ú—ñ–≥—Ä–∞—Ü—ñ—è –Ω–∞ SQLite
- ‚úÖ Flask –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏–π –¥–æ—Å—Ç—É–ø
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ JSON
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ .bat —Ñ–∞–π–ª–∏
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏
- ‚úÖ –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:
- ‚úÖ **100%** - –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!

---

## üöÄ –ó–∞–ø—É—Å–∫

**–ö–æ–º–∞–Ω–¥–∞:**
```batch
start_all.bat
```

**–ê–±–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ:**
- `START_HERE.md` –¥–ª—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
- `README_FINAL.txt` –¥–ª—è –ø—ñ–¥—Å—É–º–∫—É

---

**Schedule Bot v2.0 –ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∏–π!** üéâ


